---
# Docker host for reverse proxy and various web services
# Config-specific
secrets_files:
  - docker-host-nginx

# Hypervisor-specific
proxmox_host: pve1.int-net.saphnet.xyz
proxmox_host_port: 8006
proxmox_node: pve1
vm_id: 105
vm_name: docker-host-nginx
vm_description: Docker host for reverse proxy and various web services
mac_addr: BC:24:11:50:F4:DE
ip_addr: 192.168.8.202
ip_addr_range: 24
ip_gateway: 192.168.8.1
ssh_port: 22
cpu_cores: 4
ram_total: 4096 # Is in MiB
disk_size: 64 # Is in GiB
vm_storage: local-zfs
iso_storage: sdcard
iso_directory: /mnt/sdcard/template/iso # Matches "sdcard"
uses_impermanence: true
uses_sopsnix: true
uses_cloudinit: true

vm_config:
  # Main
  tags: nixos

  # cloud-init
  citype: nocloud # "nocloud" for Linux, "configdrive2" for Windows

disks:
  - vmid: "{{ vm_id }}" # Main drive
    disk: scsi0
    storage: "{{ vm_storage }}"
    size: "{{ disk_size }}"
    mbps_rd: 375 # We use SATA SSDs, so we want to stick to 3Gbps to avoid hogging disk IO
    mbps_wr: 375

# System-specific
nixos_config_name: "docker-host-nginx" # Make sure group_vars/nixos-vms.yaml is imported first
