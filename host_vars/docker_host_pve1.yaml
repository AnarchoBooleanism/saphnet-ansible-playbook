---
# Docker host on node pve1
# Config-specific
secrets_files:
  - docker-host-pve1

# Hypervisor-specific
proxmox_host: pve1.int-net.saphnet.xyz
proxmox_host_port: 8006
proxmox_node: pve1
vm_id: 102
vm_name: docker-host-pve1
vm_description: Docker host on node pve1
mac_addr: BC:24:11:C9:C7:05
ip_addr: 192.168.8.116
ip_addr_range: 24
ip_gateway: 192.168.8.1
ssh_port: 22
cpu_cores: 4
ram_total: 4096 # Is in MiB
disk_size: 64 # Is in GiB
vm_storage: local-zfs
iso_storage: sdcard
iso_directory: /mnt/sdcard/template/iso # Matches "sdcard"
uses_impermanence: true
uses_sopsnix: true
uses_cloudinit: true

vm_config:
  # Main
  tags: nixos

  # CPU
  cpu: host # Is only on single node, better to have all instructions available

  # cloud-init
  citype: nocloud # "nocloud" for Linux, "configdrive2" for Windows

disks:
  - vmid: "{{ vm_id }}" # Main drive
    disk: scsi0
    storage: "{{ vm_storage }}"
    size: "{{ disk_size }}"
    mbps_rd: 375 # We use SATA SSDs, so we want to stick to 3Gbps to avoid hogging disk IO
    mbps_wr: 375

# System-specific
nixos_config_name: "docker-host-pve1" # Make sure group_vars/nixos_vms.yaml is imported first
